<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1">
        <title>Index</title>

        <link rel="stylesheet" type="text/css" href="/static/skin/css/global.css" />
        <link rel="stylesheet" type="text/css" href="/static/skin/css/{{ .style }}.css" />
        <link rel="stylesheet" type="text/css" href="/static/component/chainsBall/chainsBall.css" />
        <link rel="stylesheet" type="text/css" href="/static/component/chainsWebSocket/chainsWebSocket.css" />
    </head>
    <body>
        <div class="header"></div>
        <h1>This is index page !</h1>
        <p>Gin.H     => .info : {{ .info }}</p>
        <p>/api/user/token => data  : <span id="text-target"></span></p>
        <div id="container"></div>      
        <div id="chatRoom">
            <input id="chat" type="text" />
            <button id="button">Chat</button>
            <pre id="room"></pre>
        </div>
        <div class="cube-wrap">
            <div class="cube">
                <div class="front-pane"></div>
                <div class="back-pane"></div>
                <div class="left-pane"></div>
                <div class="right-pane"></div>
                <div class="top-pane"></div>
                <div class="bottom-pane"></div>
            </div>
        </div>
        <script type="text/javascript" src="/static/js/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="/static/js/three.min.js"></script>
        <script type="text/javascript" src="/static/component/chainsWebSocket/chainsWebSocket.js"></script>
        <script type="text/javascript" src="/static/component/chainsBall/chainsBall.js"></script>
        <script>
            $(document).ready(function() {
                var port = 80;
                var server = "localhost";

                $.getJSON("/api/user/info", function(data) {
                    switch (data.retCode) {
                        case 0:
                            $("#text-target").html("API successful !");
                            $("#chatRoom").ChainsWebSocket({
                                "wsPort": port,
                                "wsUrl": server,
                                "service": "wsBroadcast",
                                "inputContainer": "#chat",
                                "buttonContainer": "#button",
                                "targetContainer": "#room",
                                "token": data.token || "000000"
                            });
                            break;
                        default:
                            $("#text-target").html("API Failed !");
                    }

                });
                $("#container").chainsBall({
                    "container": "container"
                })
            });
        </script>
    </body>
</html>